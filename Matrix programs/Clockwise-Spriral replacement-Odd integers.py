s=int(input())arr=[list(map(int,input().split())) for i in range(s)] a=input().strip() lena=len(a) n,m,k,l,o=s,s,0,0,0 while(k<m and l<n): for i in range(l,n): if arr[k][i]%2==1: arr[k][i]=a[o] o+=1 if o==lena: o=0 k+=1 for i in range(k,m): if arr[i][n-1]%2==1: arr[i][n-1]=a[o] o+=1 if o==lena: o=0 n-=1 if k<m: for i in range(n-1,l-1,-1): if arr[m-1][i]%2==1: arr[m-1][i]=a[o] o+=1 if o==lena: o=0 m-=1 if l<n: for i in range(m-1,k-1,-1): if arr[i][l]%2==1: arr[i][l]=a[o] o+=1 if o==lena: o=0 l+=1for i in arr: print(*i)
